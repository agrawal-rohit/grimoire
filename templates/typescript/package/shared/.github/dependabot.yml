version: 2
updates:
  # Keep GitHub Actions current on main (production)
  - package-ecosystem: github-actions
    directory: /
    target-branch: main
    schedule:
      interval: weekly
      day: monday
      time: "06:00"
      timezone: Asia/Kolkata
    open-pull-requests-limit: 5
    labels:
      - dependencies
      - github-actions
    commit-message:
      prefix: "ci"
      include: scope

  # Keep GitHub Actions current on next (development)
  - package-ecosystem: github-actions
    directory: /
    target-branch: next
    schedule:
      interval: weekly
      day: monday
      time: "06:00"
      timezone: Asia/Kolkata
    open-pull-requests-limit: 5
    labels:
      - dependencies
      - github-actions
    commit-message:
      prefix: "ci"
      include: scope

  # pnpm dependency updates flow into next (development)
  - package-ecosystem: npm
    directory: /
    target-branch: next
    schedule:
      interval: weekly
      day: monday
      time: "06:00"
      timezone: Asia/Kolkata
    versioning-strategy: increase
    rebase-strategy: auto
    open-pull-requests-limit: 10
    labels:
      - dependencies
      - node
      - pnpm
    commit-message:
      prefix: "fix" # for production/runtime deps
      prefix-development: "chore" # for dev-only deps
      include: scope
    groups:
      runtime-deps:
        dependency-type: production
      dev-deps:
        dependency-type: development
      typescript:
        patterns:
          - "typescript"
      vitest:
        patterns:
          - "vitest"
          - "@vitest/*"
      commitlint-husky:
        patterns:
          - "@commitlint/*"
          - "husky"
          - "lint-staged"
      semantic-release:
        patterns:
          - "semantic-release*"
          - "@semantic-release/*"
      biome:
        patterns:
          - "@biomejs/*"
      types:
        patterns:
          - "@types/*"
    ignore:
      - dependency-name: "typescript"
        update-types:
          - "version-update:semver-major"
